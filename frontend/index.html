<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Athena Library - Login</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .split-container {
            display: flex;
            gap: 2rem;
            justify-content: center;
        }
        .choice-card {
            flex: 1;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid transparent;
        }
        .choice-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-color);
        }
        .icon-large {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <div class="logo">Athena Library</div>
        </nav>

        <div class="auth-container" style="max-width: 800px;">
            
            <!-- STEP 1: Choose Role -->
            <div id="role-selection">
                <div class="auth-header">
                    <h2>Welcome to Athena</h2>
                    <p>Are you a Member or a Librarian?</p>
                </div>
                <div class="split-container">
                    <div class="card choice-card" onclick="selectRole('member')">
                        <span class="icon-large">üìñ</span>
                        <h3>Member</h3>
                        <p>Access books and history</p>
                    </div>
                    <div class="card choice-card" onclick="selectRole('librarian')">
                        <span class="icon-large">üõ°Ô∏è</span>
                        <h3>Librarian</h3>
                        <p>Manage inventory</p>
                    </div>
                </div>
                
                <div style="margin-top: 2rem; text-align: center;">
                    <a href="guest_dashboard.html" class="btn-outline">Browse as Guest</a>
                </div>
            </div>

            <!-- STEP 2: Librarian Code (Hidden) -->
            <div id="admin-code-check" class="card hidden" style="max-width: 400px; margin: 0 auto;">
                <div class="auth-header">
                    <h3>Admin Verification</h3>
                    <p>Enter access code to proceed</p>
                </div>
                <div class="form-group">
                    <input type="password" id="admin-code-input" placeholder="Enter Code">
                </div>
                <button class="btn" style="width: 100%" onclick="verifyAdminCode()">Verify</button>
                <button class="btn-outline btn" style="width: 100%; margin-top: 10px;" onclick="resetAuth()">Back</button>
            </div>

            <!-- STEP 3: Login Forms (Hidden) -->
            <div id="login-container" class="card hidden" style="max-width: 400px; margin: 0 auto;">
                <div class="auth-header">
                    <h2 id="login-title">Login</h2>
                    <p>Sign in to your account</p>
                </div>
                
                <!-- Generic Login Form (Used for both, verified by role) -->
                <form onsubmit="login(event)">
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="login-email" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="login-password" required>
                    </div>
                    <button type="submit" class="btn" style="width: 100%">Sign In</button>
                </form>

                <div id="member-links" style="margin-top: 20px;">
                     <p>Don't have an account? <a href="#" onclick="showRegister()">Register here</a></p>
                </div>
                <button class="btn-outline btn" style="width: 100%; margin-top: 20px;" onclick="resetAuth()">Back to Selection</button>
            </div>

            <!-- STEP 4: Register Form (Hidden) -->
            <div id="register-container" class="card hidden" style="max-width: 400px; margin: 0 auto;">
                <div class="auth-header">
                    <h2>Register</h2>
                    <p>Join our community</p>
                </div>
                <form onsubmit="register(event)">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="reg-name" required>
                    </div>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px">
                        <div class="form-group">
                             <label>NID Number</label>
                             <input type="text" id="reg-nid" required>
                        </div>
                        <div class="form-group">
                             <label>Date of Birth</label>
                             <input type="date" id="reg-dob" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Address</label>
                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:5px; margin-bottom:5px">
                             <input type="text" id="reg-house" placeholder="House #" required>
                             <input type="text" id="reg-street" placeholder="Street #" required>
                        </div>
                        <input type="text" id="reg-zip" placeholder="Zip Code" required>
                    </div>

                    <div class="form-group">
                        <label>Mobile Number(s) <small>(comma separated)</small></label>
                        <input type="text" id="reg-mobile" placeholder="e.g. 017..., 018..." required>
                    </div>

                    <div class="form-group hidden" id="reg-working-hours-group">
                        <label>Working Hours</label>
                        <input type="text" id="reg-working-hours" placeholder="e.g. 9:00 AM - 5:00 PM">
                    </div>

                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="reg-email" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="reg-password" required>
                    </div>
                    <button type="submit" class="btn" style="width: 100%">Create Account</button>
                </form>
                <button class="btn-outline btn" style="width: 100%; margin-top: 20px;" onclick="cancelRegister()">Cancel</button>
            </div>

        </div>
    </div>
    <script src="js/app.js"></script>
</body>
</html>
